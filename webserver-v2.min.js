const source=new EventSource("/events");var link=document.createElement("meta");link.setAttribute("name","viewport"),link.setAttribute("content","width=device-width, initial-scale=1.0"),document.getElementsByTagName("head")[0].appendChild(link),source.addEventListener("log",function(t){const e=document.getElementById("log");let n="";t.data.startsWith("[1;31m")?n="e":t.data.startsWith("[0;33m")?n="w":t.data.startsWith("[0;32m")?n="i":t.data.startsWith("[0;35m")?n="c":t.data.startsWith("[0;36m")?n="d":t.data.startsWith("[0;37m")?n="v":e.innerHTML+=t.data+"\n",e.innerHTML+='<span class="'+n+'">'+t.data.substr(7,t.data.length-10)+"</span>\n",e.scrollTop=e.scrollHeight}),source.addEventListener("state",function(t){const e=JSON.parse(t.data);document.getElementById(e.id).children[1].innerText=e.state});const states=document.getElementById("states");let row,i=0;for(;row=states.rows[i];i++)row.classList.contains("switch")&&function(t){row.children[2].children[0].addEventListener("click",function(){const e=new XMLHttpRequest;e.open("POST","/switch/"+t.substr(7)+"/toggle",!0),e.send()})}(row.id),row.classList.contains("fan")&&function(t){row.children[2].children[0].addEventListener("click",function(){const e=new XMLHttpRequest;e.open("POST","/fan/"+t.substr(4)+"/toggle",!0),e.send()})}(row.id),row.classList.contains("light")&&function(t){row.children[2].children[0].addEventListener("click",function(){const e=new XMLHttpRequest;e.open("POST","/light/"+t.substr(6)+"/toggle",!0),e.send()})}(row.id),row.classList.contains("cover")&&function(t){row.children[2].children[0].addEventListener("click",function(){const e=new XMLHttpRequest;e.open("POST","/cover/"+t.substr(6)+"/open",!0),e.send()}),row.children[2].children[1].addEventListener("click",function(){const e=new XMLHttpRequest;e.open("POST","/cover/"+t.substr(6)+"/close",!0),e.send()})}(row.id);